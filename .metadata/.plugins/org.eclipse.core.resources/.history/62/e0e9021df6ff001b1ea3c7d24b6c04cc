package com.app;

import java.util.Scanner;

import org.apache.log4j.Logger;

import com.app.dao.CustomerCreateDAO;
import com.app.dao.impl.CustomerCreateDAOImpl;
import com.app.exception.BusinessException;
import com.app.model.Customer;
import com.customer.create.service.CustomerCreateService;
import com.customer.create.service.impl.CustomerCreateServiceImpl;

public class Main {
	
	private static Logger log = Logger.getLogger(Main.class);
	
	public static void main(String[] args) {
		
		Scanner scanner = new Scanner(System.in);
		
		log.info("Welcome to shopping app");
		log.info("-------------------------------");
		
		int choice = 0;
		
		do{
			
			log.info("Please login: ");
			log.info("\n1.) Associate Login");
			log.info("2.) Customer Registration");
			log.info("3.) Customer Login");
			log.info("4.) Close App");
			
			log.info("\n Please enter your choice: ");
			
			try{
				choice = Integer.parseInt(scanner.nextLine());
			}catch(NumberFormatException e) {
				
			}
			
			switch (choice) {
			case 1: log.info("Under Construction");
				
				break;
				
			case 2: log.info("Enter customer details for creation :\n");
			
			CustomerCreateService customerCreateService = new CustomerCreateServiceImpl();
			CustomerCreateDAO customerCreateDAO = new CustomerCreateDAOImpl();
			
			Customer customer = new Customer();
			
			log.info("1.) Enter email");
			
			String email = scanner.nextLine();

				try {
					if(customerCreateService.checkEmail(email)) {
						customer.setEmail(email);
					}
				} catch (BusinessException e) {
					log.warn(e.getMessage());
					continue;
				}
			
				break;
				
			case 3: log.info("Under Construction");
			
				break;
				
			case 4: log.info("Thanks for shopping with us! Hope to see you soon :)");
			
				break;

			default: log.warn("Invalid choice! The choice should only be a number between 1-4. Please try again.");
				break;
			
			
			}
			
		}while(choice!=4);
		
	}
}
